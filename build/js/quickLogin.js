webpackJsonp([24],{67:function(e,t,a){"use strict";var i=a(0),d=function(e){return e&&e.__esModule?e:{default:e}}(i);a(4),a(2),a(5);var n=function(e){var t=e.search.substr(1),a=e.hash.substr(1);if(t.indexOf("qq")>-1)var i=a.split("&");else var i=t.split("&");for(var d={},n=0;n<i.length;n++){var o=i[n].split("=");d[o[0]]=o[1]}if(t.indexOf("qq")>-1){var l=t.slice(t.indexOf("qq"),-1);d.directway=l}return d}(window.location),o="",l={};n.directway.indexOf("wechat")>-1?(n.directway.indexOf("@")>-1&&(o=n.directway.slice(n.directway.indexOf("@")+1)),EventUtils.ajaxReq("/center/user/WechatLogin?code="+n.code,"get",{},function(e,t){if("0"==e.data.status)l.nickName=e.data.nickName,l.userIcon=e.data.icon,l.openId=e.data.openId,(0,d.default)(".bg").show(),(0,d.default)(".bind-mobile-box").show();else if("0"==e.data.cardStatus){var a="userType=0&userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;window.location.href="vCards.html?"+window.btoa(a)}else{var a="userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;if(o)if(o.indexOf("?")>-1){var i=o.split("?")[0],n=o.split("?")[1];n?(n=window.atob(n)+"&"+a,n=window.btoa(n)):n=window.btoa(a),window.location.href=i+"?"+n}else window.location.href=o+"?"+window.btoa(a);else window.location.href="pCenter.html?"+window.btoa(a)}})):n.directway.indexOf("qq")>-1?(n.directway.indexOf("@")>-1&&(o=n.directway.slice(n.directway.indexOf("@")+1)),EventUtils.ajaxReq("/center/user/QqLogin?accessToken="+n.access_token,"get",{},function(e,t){if("0"==e.data.status)l.nickName=e.data.nickName,l.userIcon=e.data.icon,l.openId=e.data.openId,(0,d.default)(".bg").show(),(0,d.default)(".bind-mobile-box").show();else if("0"==e.data.cardStatus){var a="userType=0&userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;window.location.href="vCards.html?"+window.btoa(a)}else{var a="userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;if(o)if(o.indexOf("?")>-1){var i=o.split("?")[0],n=o.split("?")[1];n?(n=window.atob(n)+"&"+a,n=window.btoa(n)):n=window.btoa(a),window.location.href=i+"?"+n}else window.location.href=o+"?"+window.btoa(a);else window.location.href="pCenter.html?"+window.btoa(a)}})):n.directway.indexOf("weibo")>-1&&(n.directway.indexOf("@")>-1&&(o=n.directway.slice(n.directway.indexOf("@")+1),console.log(o)),EventUtils.ajaxReq("/center/user/WeboLogin?code="+n.code,"get",{},function(e,t){if("0"==e.data.status)l.nickName=e.data.nickName,l.userIcon=e.data.icon,l.openId=e.data.openId,(0,d.default)(".bg").show(),(0,d.default)(".bind-mobile-box").show();else if("0"==e.data.cardStatus){var a="userType=0&userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;window.location.href="vCards.html?"+window.btoa(a)}else{var a="userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;if(o)if(o.indexOf("?")>-1){var i=o.split("?")[0],n=o.split("?")[1];n?(n=window.atob(n)+"&"+a,n=window.btoa(n)):n=window.btoa(a),window.location.href=i+"?"+n}else window.location.href=o+"?"+window.btoa(a);else window.location.href="pCenter.html?"+window.btoa(a)}})),(0,d.default)("#submitBtn").click(function(){var e={nickName:l.nickName,icon:l.userIcon,openId:l.openId,code:(0,d.default)(".code-data input").val(),inputRandomCode:(0,d.default)(".valid-data input").val(),phone:(0,d.default)(".mobile-data input").val()};return e.code&&e.inputRandomCode&&e.phone?variableUtils.regExp.mobile.test(e.phone)?("qq"==n.directway?e.type=0:"wechat"==n.directway?e.type=1:"weibo"==n.directway&&(e.type=2),void EventUtils.ajaxReq("/center/user/BindPhone","post",e,function(e,t){if("0"==e.data.cardStatus){var a="userType=0&userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;window.location.href="vCards.html?"+window.btoa(a)}else{var a="userId="+e.data.userId+"&loginId="+e.data.loginIdentifier;window.location.href="pCenter.html?"+window.btoa(a)}})):(swal({title:"",text:"手机格式不正确！",type:"warning"}),!1):(swal({title:"",text:"请检查信息是否完整！",type:"warning"}),!1)}),(0,d.default)(".mobile-data input").bind("input",function(){/^\d{0,11}$/.test(this.value)||(this.value=this.value.slice(0,-1))}),(0,d.default)(".valid-data .code-pic").click(function(){this.src="https://www.xiaoqiztc.com/easily_xq_WebApi/sys/img?"+Math.random()}),(0,d.default)(".code-data button").click(function(){var e=(0,d.default)(".mobile-data input").val();if(!variableUtils.regExp.mobile.test(e))return swal({title:"",text:"手机格式不正确！",type:"warning"}),!1;(0,d.default)(this).attr("disabled",!0);var t=0,a=this,i=setInterval(function(){t++,60==t?((0,d.default)(a).html("获取验证码"),(0,d.default)(a).attr("disabled",!1),clearInterval(i)):(0,d.default)(a).html("重新获取 ("+(60-t)+"s)")},1e3),n={mobile:e,type:3},o=function(e,t){swal({title:"",text:e.info,type:"warning"})};EventUtils.ajaxReq("/sys/mobileCode","post",n,o)})}},[67]);