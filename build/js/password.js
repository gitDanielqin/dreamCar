webpackJsonp([15],{43:function(t,e){},66:function(t,e,s){"use strict";function i(){o.default.ajax({url:"https://www.xiaoqiztc.com/easily_xq_WebApi/sys/img",type:"get",async:!1,data:{},success:function(t,e){(0,o.default)(".code-pic")[0].src="https://www.xiaoqiztc.com/easily_xq_WebApi/sys/img?"+Math.random()},error:function(t,e){swal({title:"",text:"请求服务器数据错误，请稍后重试！",type:"warning"})},timeout:1e5})}var n=s(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n);s(4),s(2);var a=s(1);s(3),s(5),s(43);var r=EventUtils.urlExtrac(window.location),h=new a({el:"#app-content",data:{show:{step1:!0,step2:!1,step3:!1,email:!0,mobile:!1,hint:!1},account:{email:"",mobile:"",userId:""},hint:"",userInfo:{account:"",picCode:"",mobile:"",email:"",emailValidCode:"",mobileValidCode:"",newPass:"",repeatPass:""}},methods:{switchcode:i,nextstep:function(t){if(1==t){if(""==this.userInfo.account)return this.hint="账号不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.email.test(this.userInfo.account)&&!variableUtils.regExp.mobile.test(this.userInfo.account))return this.hint="账号信息格式不正确！",this.show.hint=!0,!1;if(""==this.userInfo.picCode)return this.hint="验证码不能为空！",this.show.hint=!0,!1;var e={loginName:this.userInfo.account,inputRandomCode:this.userInfo.picCode};EventUtils.ajaxReq("/sys/getOldConection?","get",e,function(t,e){t.data?(h.account.email=t.data.email,h.account.mobile=t.data.mobile,h.account.userId=t.data.userId,h.show.step1=!1,h.show.step2=!0):(swal({title:"",text:t.info,type:"error"}),i())}),this.show.hint=!1}},postcode:function(t,e){if("email"==t){if(""==h.userInfo.email)return this.hint="邮箱不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.email.test(h.userInfo.email))return this.hint="邮箱格式不正确！",this.show.hint=!0,!1;if(h.userInfo.email!=h.account.email)return this.hint="输入的邮箱与绑定邮箱不一致！",this.show.hint=!0,!1;var s=0;(0,o.default)(e).attr("disabled",!0);var i=setInterval(function(){s++,60==s?(e.innerHTML="发送验证码",(0,o.default)(e).attr("disabled",!1),clearInterval(i)):e.innerHTML="重新获取 ("+(60-s)+"s)"},1e3),n={email:h.userInfo.email,type:3};EventUtils.ajaxReq("/sys/emailCode","post",n,function(t,e){"00000"==t.code?swal({title:"",text:"验证码发送成功！",type:"success"}):swal({title:"",text:t.info,type:"error"})})}if("mobile"==t){if(""==h.userInfo.mobile)return this.hint="手机号不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.mobile.test(h.userInfo.mobile))return this.hint="手机号格式不正确！",this.show.hint=!0,!1;if(h.userInfo.mobile!=h.account.mobile)return this.hint="您输入的手机号码与绑定手机不一致！",this.show.hint=!0,!1;var s=0;(0,o.default)(e).attr("disabled",!0);var i=setInterval(function(){s++,60==s?(e.innerHTML="发送验证码",(0,o.default)(e).attr("disabled",!1),clearInterval(i)):e.innerHTML="重新获取 ("+(60-s)+"s)"},1e3),n={mobile:h.userInfo.mobile,type:3};EventUtils.ajaxReq("/sys/mobileCode","post",n,function(t,e){"00000"==t.code?swal({title:"",text:"验证码发送成功！",type:"success"}):swal({title:"",text:t.info,type:"error"})})}},selectway:function(t,e){(0,o.default)(".backway-navs .on").removeClass("on"),(0,o.default)(e).addClass("on"),"email"==t?(this.show.hint=!1,this.hint="",this.show.email=!0,this.show.mobile=!1):"mobile"==t&&(this.show.hint=!1,this.hint="",this.show.email=!1,this.show.mobile=!0)},pswViaEmail:function(){if(""==h.userInfo.email)return this.hint="邮箱不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.email.test(h.userInfo.email))return this.hint="您输入的邮箱格式不正确！",this.show.hint=!0,!1;if(""==h.userInfo.emailValidCode)return this.hint="验证码不能为空！",this.show.hint=!0,!1;var t={loginName:this.userInfo.email,type:3,code:this.userInfo.emailValidCode};EventUtils.ajaxReq("/sys/checkCode","get",t,function(t,e){"1"==t.data.result&&(h.show.step2=!1,h.show.step3=!0)}),this.hint="",this.show.hint=!1},pswViaMobile:function(){if(""==h.userInfo.mobile)return this.hint="手机号不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.mobile.test(h.userInfo.mobile))return this.hint="您输入的手机格式不正确！",this.show.hint=!0,!1;if(""==h.userInfo.mobileValidCode)return this.hint="验证码不能为空！",this.show.hint=!0,!1;var t={loginName:this.userInfo.mobile,type:3,code:this.userInfo.mobileValidCode};EventUtils.ajaxReq("/sys/checkCode","get",t,function(t,e){"1"==t.data.result&&(h.show.step2=!1,h.show.step3=!0)}),this.hint="",this.show.hint=!1},checkpass:function(t,e){"new"==t?variableUtils.regExp.password.test(this.userInfo.newPass)?(0,o.default)(e).removeClass("wrong").addClass("right"):""!=this.userInfo.newPass?(0,o.default)(e).removeClass("right").addClass("wrong"):(0,o.default)(e).removeClass("wrong"):this.userInfo.repeatPass==this.userInfo.newPass?(0,o.default)(e).removeClass("wrong").addClass("right"):""!=this.userInfo.repeatPass?(0,o.default)(e).removeClass("right").addClass("wrong"):(0,o.default)(e).removeClass("wrong")},resetPsw:function(){if(""==h.userInfo.newPass)return this.hint="新密码不能为空！",this.show.hint=!0,!1;if(!variableUtils.regExp.password.test(this.userInfo.newPass))return this.hint="密码格式不正确！",this.show.hint=!0,!1;if(this.userInfo.repeatPass!=this.userInfo.newPass)return this.hint="两次密码输入不一致！",this.show.hint=!0,!1;var t={userId:this.account.userId,password:this.userInfo.newPass,dbPassword:this.userInfo.repeatPass};EventUtils.ajaxReq("/center/user/resetPassword","post",t,function(t,e){"00000"==t.code?(swal({title:"",text:"密码修改成功，将自动跳转到登陆页面！",type:"success",showConfirmButton:!1}),setTimeout(function(){window.location.href=EventUtils.securityUrl("login.html?newAcc=0")},1e3)):swal({title:"",text:t.info,type:"error"})}),this.hint="",this.show.hint=!1}},mounted:function(){(0,o.default)(".code-pic")[0].src="https://www.xiaoqiztc.com/easily_xq_WebApi/sys/img"}});new a({el:"#app-footer",methods:{homeLink:function(){var t="index.html?";r.userId&&(t+="userId="+r.userId),window.location.href=EventUtils.securityUrl(t)},footerLink:function(t){var e="footer-page.html?theme="+t;r.userId&&(e+="&userId="+r.userId),e=EventUtils.securityUrl(e),window.location.href=e}}});window.onunload=function(){h.$off()}}},[66]);